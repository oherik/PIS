QA12 - MC68HC12 Absolute crossassembler, Version 1.6.3
(c) GMV 1989-2013


File: Delay.lst
                            1. 	use	Labdefs.s12
---- File: "Labdefs.s12"
                            2. ;Adresser
       0000 0600            3. DipSwitch	equ	$600
       0000 0700            4. HexDisplay	equ	$700
       0000 0400            5. DrillControl	equ	$400
       0000 0401            6. DrillStatus	equ	$401
                            7. 
000000                      8. #ifdef	SIMULATOR
                           14. #else
       0000 0004           15. DelayConst	EQU	4
                           16. #endif002000                     17. 	org	$2000
---- File: "C:\Users\Erik\Documents\GitHub\PIS\Bokuppgifter\Delay.s12"
002000 34                  18. DELAY:	pshx		; 250 ms delay
002001 35                  19. 	pshy
002002 CE 00 04            20. 	ldx	#DelayConst
002005 1A 1F               21. NEXT:	leax	-1,x
002007 CD 00 64            22. 	ldy	#100
00200A 19 5F               23. NEXT2:	leay	-1,y
00200C 8D 00 00            24. 	cpy	#0
00200F 26 F9               25. 	bne	NEXT2
002011 8E 00 00            26. 	cpx	#0
002014 26 EF               27. 	bne	NEXT
002016 31                  28. 	puly
002017 30                  29. 	pulx
002018 3D                  30. 	rts	
002019                     31. 	
002019                     32. DELAY_B:		; Calls DELAY the number of times specified in B
002019 37                  33. 	pshb
00201A D7                  34. 	tstb
00201B                     35. DELAY_B_LOOP:
00201B 27 06               36. 	beq	DELAY_B_RETURN
00201D 16 20 00            37. 	jsr	DELAY
002020 53                  38. 	decb
002021 20 F8               39. 	bra	DELAY_B_LOOP
002023                     40. DELAY_B_RETURN:
002023 33                  41. 	pulb
002024 3D                  42. 	rts 