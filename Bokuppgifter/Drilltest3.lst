QA12 - MC68HC12 Absolute crossassembler, Version 1.6.3
(c) GMV 1989-2013


File: Drilltest3.lst
                            1. 	use	Labdefs.s12
---- File: "Labdefs.s12"
                            2. ;Adresser
       0000 0600            3. DipSwitch	equ	$600
       0000 0700            4. HexDisplay	equ	$700
       0000 0400            5. DrillControl	equ	$400
       0000 0401            6. DrillStatus	equ	$401
                            7. 
000000                      8. #ifdef	SIMULATOR
                           14. #else
       0000 0004           15. DelayConst	EQU	4
                           16. #endif001000                     17. 	org	$1000
---- File: "C:\Users\Erik\Documents\GitHub\PIS\Bokuppgifter\Drilltest3.s12"
001000                     18. start:	
001000 16 20 19            19. 	jsr	Vrid1steg
001003 20 FB               20. 	bra	start
001005                     21. 	
                           22. 	use	Delay.s12
---- File: "Delay.s12"
001005                     23. #ifdef	RUNFAST
                           25. #else
       0000 0001           26. DelayConstant	equ	1	;Minimum number for the constant, the delay will however be too long
                           27. #endif
001005                     28. 	
002000                     29. 	org	$2000
002000 34                  30. DELAY:	pshx
002001 35                  31. 	pshy
002002 CE 00 01            32. 	ldx	#DelayConstant
002005 1A 1F               33. NEXT:	leax	-1,x
002007 CD 00 64            34. 	ldy	#100
00200A 19 5F               35. NEXT2:	leay	-1,y
00200C 8D 00 00            36. 	cpy	#0
00200F 26 F9               37. 	bne	NEXT2
002011 8E 00 00            38. 	cpx	#0
002014 26 EF               39. 	bne	NEXT
002016 31                  40. 	puly
002017 30                  41. 	pulx
002018 3D                  42. 	rts	002019                     43. 	
---- File: "C:\Users\Erik\Documents\GitHub\PIS\Bokuppgifter\Drilltest3.s12"
002019                     44. Vrid1steg:
002019 86 02               45. 	ldaa	#2		;Medurs (ettställ bit 1, nollställ övriga)
00201B 7A 04 00            46. 	staa	DrillControl	
00201E 42                  47. 	inca
00201F 7A 04 00            48. 	staa	DrillControl	;Stega (addera 1 till 2 = 3 => bit 1 och 0 ettställda)
002022 16 20 00            49. 	jsr	DELAY		;250 ms delay
002025 3D                  50. 	rts	