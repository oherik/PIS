QA12 - MC68HC12 Absolute crossassembler, Version 1.6.3
(c) GMV 1989-2013


File: Drilltest3.lst
000000                      1. 	;use	Labdefs.s12
---- File: "C:\Users\Erik\Documents\GitHub\PIS\Bokuppgifter\Drilltest3.s12"
                            2. #define	SIMULATOR
                            3. #define RUNFAST
001000                      4. 	org	$1000
001000                      5. start:	
001000 16 20 19             6. 	jsr	Vrid1steg
001003 20 FB                7. 	bra	start
001005                      8. 	
                            9. 	use	Delay.s12
---- File: "Delay.s12"
                           10. 	use	Labdefs.s12
---- File: "Labdefs.s12"
                           11. ;Adresser
       0000 0600           12. DipSwitch	equ	$600
       0000 0700           13. HexDisplay	equ	$700
       0000 0400           14. DrillControl	equ	$400
       0000 0401           15. DrillStatus	equ	$401
                           16. 
                           17. #ifdef	SIMULATOR
                           18. #ifdef	RUNFAST
       0000 0007           19. DelayConst	EQU	7
                           22. #endif
                           25. #endif002000                     26. 	org	$2000
---- File: "Delay.s12"
002000 34                  27. DELAY:	pshx
002001 35                  28. 	pshy
002002 CE 00 07            29. 	ldx	#DelayConst
002005 1A 1F               30. NEXT:	leax	-1,x
002007 CD 00 64            31. 	ldy	#100
00200A 19 5F               32. NEXT2:	leay	-1,y
00200C 8D 00 00            33. 	cpy	#0
00200F 26 F9               34. 	bne	NEXT2
002011 8E 00 00            35. 	cpx	#0
002014 26 EF               36. 	bne	NEXT
002016 31                  37. 	puly
002017 30                  38. 	pulx
002018 3D                  39. 	rts	002019                     40. 	
---- File: "C:\Users\Erik\Documents\GitHub\PIS\Bokuppgifter\Drilltest3.s12"
002019                     41. Vrid1steg:
002019 86 02               42. 	ldaa	#2		;Medurs (ettställ bit 1, nollställ övriga)
00201B 7A 04 00            43. 	staa	DrillControl
00201E 42                  44. 	inca
00201F 7A 04 00            45. 	staa	DrillControl	;Stega (addera 1 till 2 = 3 => bit 1 och 0 ettställda)
002022 16 20 00            46. 	jsr	DELAY		;250 ms delay
002025 3D                  47. 	rts	
                           48. 
                           49. 	use	Labdefs.s12---- File: "Labdefs.s12"
                           50. ;Adresser
       0000 0600           51. DipSwitch	equ	$600
       0000 0700           52. HexDisplay	equ	$700
       0000 0400           53. DrillControl	equ	$400
       0000 0401           54. DrillStatus	equ	$401
                           55. 
                           56. #ifdef	SIMULATOR
                           57. #ifdef	RUNFAST
       0000 0007           58. DelayConst	EQU	7
                           61. #endif
                           64. #endif