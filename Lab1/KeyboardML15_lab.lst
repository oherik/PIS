QA12 - MC68HC12 Absolute crossassembler, Version 1.6.3
(c) GMV 1989-2013


File: KeyboardML15_lab.lst
                            1. ;Testprogram
001000                      2. 	org	$1000
                            3. ;start:	jsr	GetKbdML15
                            4. ;	cmpb	#$FF
                            5. ;	beq	start
                            6. ;	nop
                            7. ;	bra	start
001000 CE 10 08             8. 	ldx	#tabell
001003 16 10 26             9. start:	jsr	DisplayML15
001006 20 FB               10. 	bra	start
                           11. ;
001008 01 02 03 04 05 06   12. tabell:	fcb	1,2,3,4,5,6
                           13. 
00100E                     14. 	
00100E                     15. CheckKbdML15:
00100E F6 09 C0            16. 	ldab	$9c0
001011 2A 03               17. 	bpl	CheckKbd_VA
001013 C6 FF               18. 	ldab	#$FF	
001015 3D                  19. 	rts
001016                     20. CheckKbd_VA:
001016 37                  21. 	pshb
001017                     22. CheckKbd_VA_active:
001017 F6 09 C0            23. 	ldab	$9c0
00101A 2A FB               24. 	bpl	CheckKbd_VA_active
00101C 33                  25. 	pulb
00101D 3D                  26. 	rts
00101E                     27. 	
00101E                     28. GetKbdML15:
00101E 16 10 0E            29. 	jsr	CheckKbdML15
001021 C1 FF               30. 	cmpb	#$FF
001023 27 F9               31. 	beq	GetKbdML15
001025 3D                  32. 	rts
001026                     33. 	
001026                     34. DisplayML15:	; Visa sifforna 1-6 på displayen
001026 16 10 59            35. 	jsr	DisplayML15_reset
001029 7A 09 C2            36. 	staa	$9c2
00102C                     37. DisplayML15_compare_loop:
00102C 81 06               38. 	cmpa	#6
00102E 26 09               39. 	bne	DisplayML15_not_6
001030 86 00               40. 	ldaa	#0
001032 7A 09 C3            41. 	staa	$9c3
001035 7A 09 C3            42. 	staa	$9c3
001038 3D                  43. 	rts
001039                     44. DisplayML15_not_6
001039                     45. 	ldab	a,x
00103B 7B 09 C3            46. 	stab	$9c3
00103E 42                  47. 	inca
00103F 20 EB               48. 	bra	DisplayML15_compare_loop
001041                     49. 	
001041                     50. DisplayML15_Stack:	; Visa ett värde som lagts på stacken på samtliga displayer
001041 16 10 59            51. 	jsr	DisplayML15_reset
001044                     52. 	ldab	2,sp	; Lägg stackvärdet i B
001046                     53. DisplayML15_Stack_compare_loop:
001046 81 06               54. 	cmpa	#6
001048 26 09               55. 	bne	DisplayML15_Stack_not_6
00104A 86 00               56. 	ldaa	#0
00104C 7A 09 C3            57. 	staa	$9c3
00104F 7A 09 C3            58. 	staa	$9c3
001052 3D                  59. 	rts
001053                     60. DisplayML15_Stack_not_6:
001053 7B 09 C3            61. 	stab	$9c3
001056 42                  62. 	inca
001057 20 ED               63. 	bra	DisplayML15_Stack_compare_loop
001059                     64. 	
001059                     65. DisplayML15_reset:
001059 86 01               66. 	ldaa	#1
00105B 7A 09 C2            67. 	staa	$9c2
00105E 86 D0               68. 	ldaa	#$d0
001060 7A 09 C3            69. 	staa	$9c3
001063 86 00               70. 	ldaa	#0
001065 7A 09 C2            71. 	staa	$9c2
001068 3D                  72. 	rts
                           73. 
001069                     74. 	
001069                     75. 	